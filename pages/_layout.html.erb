<!doctype html>

<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="description" content="<%= description %>">

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    >

    <!-- Opengraph -->
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://whereto.ski/">

    <meta property="og:image" content="https://whereto.ski/assets/logo.svg">

    <script
      defer
      src="https://cloud.umami.is/script.js"
      data-website-id="f7b15640-326b-4ea5-a2f3-912fdf4b1d35"
    ></script>

    <link rel="stylesheet" href="/assets/main.css">

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/assets/favicon/apple-icon-57x57.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/assets/favicon/apple-icon-60x60.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/assets/favicon/apple-icon-72x72.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/assets/favicon/apple-icon-76x76.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/assets/favicon/apple-icon-114x114.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/assets/favicon/apple-icon-120x120.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/assets/favicon/apple-icon-144x144.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/assets/favicon/apple-icon-152x152.png"
    >

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/favicon/apple-icon-180x180.png"
    >

    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/assets/favicon/android-icon-192x192.png"
    >

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon-32x32.png"
    >

    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/assets/favicon/favicon-96x96.png"
    >

    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/favicon/favicon-16x16.png"
    >

    <link rel="manifest" href="/assets/favicon/manifest.json">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>Where To Ski &raquo; <%= title %></title>
  </head>

  <body>
    <!-- Navbar -->
    <div class="drawer">
      <input id="nav-drawer" type="checkbox" class="drawer-toggle">

      <div class="drawer-content flex flex-col">
        <div class="navbar bg-base-100 w-full">
          <div class="flex-none lg:hidden">
            <label
              for="nav-drawer"
              aria-label="Open sidebar"
              class="btn btn-square btn-ghost"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="inline-block w-6 h-6 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </label>
          </div>

          <div class="flex-1">
            <a class="btn btn-ghost text-xl" href="/">
              <svg
                class="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"
                ></path>
              </svg>

              <span class="font-bold">Where To Ski</span>
            </a>
          </div>

          <div class="flex-none gap-2">
            <!-- Search Button -->
            <button
              id="search-button"
              class="btn btn-ghost btn-square"
              aria-label="Search"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="inline-block w-5 h-5 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </button>

            <div class="dropdown dropdown-end">
              <label tabindex="0" class="btn btn-ghost btn-square">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  class="inline-block w-5 h-5 stroke-current"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>

                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
              </label>

              <ul
                tabindex="0"
                class="
                  dropdown-content menu p-4 shadow-lg bg-base-100
                  rounded-box w-72 mt-3 gap-3
                "
              >
                <li class="menu-title"><span>Settings</span></li>

                <li>
                  <div class="flex items-center justify-between p-2">
                    <span>Temperature Unit</span>

                    <label class="flex cursor-pointer gap-2">
                      <span class="label-text text-xs">°F</span>

                      <input
                        type="checkbox"
                        id="unit-toggle"
                        class="toggle toggle-sm"
                      >

                      <span class="label-text text-xs">°C</span>
                    </label>
                  </div>
                </li>

                <li>
                  <div class="flex items-center justify-between p-2">
                    <span>Show Only Snow</span>

                    <input
                      type="checkbox"
                      id="filter-snow-toggle"
                      class="toggle toggle-sm"
                    >
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="container mx-auto p-4"><%= content %></div>

        <footer
          class="
            footer footer-horizontal footer-center bg-base-200
            text-base-content rounded p-10
          "
        >
          <nav class="grid grid-flow-col gap-4">
            <a class="link link-hover" href="/about">About</a>

            <a class="link link-hover" href="mailto:hello@whereto.ski">
              Contact
            </a>

            <a
              class="link link-hover"
              href="https://www.buymeacoffee.com/jtarchie"
              target="_blank"
            >
              Support Us
            </a>
          </nav>

          <aside>
            <p>
              © <%= Time.now.strftime("%Y") %>
              <a href="https://github.com/jtarchie/followthesnow">Where To Ski</a>
              
              <br>
              Last Updated: <%= h current_timestamp %>
            </p>
          </aside>
        </footer>
      </div>

      <div class="drawer-side">
        <label
          for="nav-drawer"
          aria-label="Close sidebar"
          class="drawer-overlay"
        ></label>

        <ul class="menu p-4 w-80 min-h-full bg-base-200"></ul>
      </div>
    </div>

    <!-- Search Modal -->
    <dialog id="search-modal" class="modal">
      <div class="modal-box w-11/12 max-w-2xl">
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
            ✕
          </button>
        </form>

        <h3 class="font-bold text-lg mb-4">Search Resorts</h3>

        <input
          type="text"
          id="search-input"
          placeholder="Search for countries, states, or resorts..."
          class="input input-bordered w-full mb-4"
          autocomplete="off"
        >

        <div id="search-loading" class="text-center py-8 hidden">
          <span class="loading loading-spinner loading-lg"></span>
        </div>

        <div id="search-results" class="max-h-96 overflow-y-auto"></div>

        <div
          id="search-empty"
          class="text-center py-8 text-base-content/60 hidden"
        >
          No results found
        </div>
      </div>

      <form method="dialog" class="modal-backdrop">
        <button>close</button>
      </form>
    </dialog>

    <script src="/assets/main.js"></script>

    <script src="/assets/search.js"></script>
  </body>
</html>
